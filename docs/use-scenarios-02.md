### Пользователь: Войти

| Название поля         | Содержание                                                                                                                                                                                                                                                                                                                                                                                              |
| --------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Заголовок             | Пользователь: Войти                                                                                                                                                                                                                                                                                                                                                                                     |
| Участники             | Пользователь, Внешняя система авторизации (ВСА)                                                                                                                                                                                                                                                                                                                                                         |
| Предусловие           | Пользователь зашел на сайт                                                                                                                                                                                                                                                                                                                                                                              |
| Триггер               | Пользователь инициирует вход в систему                                                                                                                                                                                                                                                                                                                                                                  |
| Постусловие           | Пользователь авторизован                                                                                                                                                                                                                                                                                                                                                                                |
| Основной поток        | 1. Пользователь инициирует вход в систему<br>2. Система предлагает выбор способа авторизации<br>3. Пользователь выбирает способ авторизации<br>4. Система перенаправляет пользователя во внешнюю систему авторизации<br>5. Пользователь авторизуется через внешнюю систему<br>6. ВСА возвращает системе токен доступа<br>7. Система проверяет токен<br>8. Система открывает личный кабинет пользователя |
| Альтернативные потоки | **Альтернатива 1: Отказ от авторизации**<br>3a.1. Пользователь закрывает окно авторизации или нажимает «Отмена»<br>3a.2. Система возвращает пользователя на страницу входа без входа в кабинет<br><br>**Альтернатива 2: Истекший или недействительный токен**<br>7a.1. Система получает некорректный или устаревший токен<br>7a.2. Система предлагает пройти авторизацию заново                         |
| Исключения            | Недоступен внешний сервис авторизации                                                                                                                                                                                                                                                                                                                                                                   |

### Пользователь: Создать публикацию

| Название поля         | Содержание                                                                                                                                                                               |
| --------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Заголовок             | Пользователь: Создать публикацию                                                                                                                                                         |
| Участники             | Пользователь                                                                                                                                                                             |
| Предусловие           | Пользователь авторизован                                                                                                                                                                 |
| Триггер               | Пользователь инициирует создание публикации                                                                                                                                              |
| Постусловие           | Создана новая публикация                                                                                                                                                                 |
| Основной поток        | 1. Пользователь инициирует создание публикации<br>2. Система отображает форму<br>3. Пользователь заполняет форму<br>4. Система проверяет корректность<br>5. Система сохраняет публикацию |
| Альтернативные потоки | **Альтернатива 1: Некорректные данные**<br>4a. Если данные не соответствуют требованиям R-04, R-05, R-06, R-07, то система показывает сообщение об ошибке                                |
| Исключения            | Ошибка при обращении к базе данных                                                                                                                                                       |

### Пользователь: Добавить изображение в альбом

| Название поля         | Содержание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| --------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Заголовок             | Пользователь: Добавить изображение в альбом                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Участники             | Пользователь                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Предусловие           | Пользователь авторизован, изображение открыто                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Триггер               | Пользователь инициирует добавление изображения в альбом                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Постусловие           | Изображение добавлено в альбом                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Основной поток        | 1. Пользователь инициирует добавление изображения в альбом<br>2. Система предоставляет выбор альбома для сохранения<br>3. Пользователь выбирает альбом<br>4. Система сохраняет изображение в альбом                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Альтернативные потоки | **Альтернатива 1: Пользователь отменил выбор альбома**<br>3a.1. Пользователь закрывает диалог<br>3a.2. Изображение не сохраняется<br><br>**Альтернатива 2: Создание нового альбома**<br>3b.1. Пользователь выбирает создание нового альбома<br>3b.2. Система выполняет основной поток сценария UC "Пользователь: Создать альбом"<br>3b.3. Система переходит на шаг 4 основного потока<br><br>**Альтернатива 3: Изображение уже сохранено в альбоме**<br>4a.1. Система показывает сообщение «Это изображение уже находится в выбранном альбоме» и предлагает выбрать другой альбом<br>4а.2. Переход на шаг 3 основного потока |
| Исключения            | Ошибка при обращении к базе данных                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |

### Пользователь: Добавить в понравившееся

| Название поля         | Содержание                                                                                                                                                                     |
| --------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Заголовок             | Пользователь: Добавить в понравившееся                                                                                                                                         |
| Участники             | Пользователь                                                                                                                                                                   |
| Предусловие           | Пользователь авторизован, изображение открыто                                                                                                                                  |
| Триггер               | Пользователь инициирует добавление в понравившиеся                                                                                                                             |
| Постусловие           | Изображение добавлено в понравившиеся                                                                                                                                          |
| Основной поток        | 1. Пользователь инициирует добавление в понравившиеся<br>2. Система проверяет добавлено ли изображение в «Понравившиеся»<br>3. Система добавляет изображение в «Понравившиеся» |
| Альтернативные потоки | **Альтернатива 1: Изображение уже в избранном**<br>2a. Если изображение есть в списке, система удаляет его из «Понравившихся»                                                  |
| Исключения            | Ошибка при обращении к базе данных                                                                                                                                             |

### Пользователь: Переименовать альбом

| Название поля         | Содержание                                                                                                                                                                                                                            |
| --------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Заголовок             | Пользователь: Переименовать альбом                                                                                                                                                                                                    |
| Участники             | Пользователь                                                                                                                                                                                                                          |
| Предусловие           | Пользователь авторизован и альбом открыт                                                                                                                                                                                              |
| Триггер               | Пользователь инициирует переименование альбома                                                                                                                                                                                        |
| Постусловие           | Альбом переименован                                                                                                                                                                                                                   |
| Основной поток        | 1. Пользователь инициирует переименование альбома<br>2. Система отображает форму с текущими данными<br>3. Пользователь изменяет поле<br>4. Система проверяет данные<br>5. Система сохраняет изменения и обновляет отображение альбома |
| Альтернативные потоки | **Альтернатива 1: Некорректные данные**<br>4a. Если данные не соответствуют требованиям R-01, R-02, R-03, то система показывает сообщение об ошибке                                                                                   |
| Исключения            | Ошибка при обращении к базе данных                                                                                                                                                                                                    |

### Пользователь: Искать изображение

| Название поля         | Содержание                                                                                                                                                                                                                                            |
| --------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Заголовок             | Пользователь: Искать изображение                                                                                                                                                                                                                      |
| Участники             | Пользователь                                                                                                                                                                                                                                          |
| Предусловие           | Пользователь авторизован                                                                                                                                                                                                                              |
| Триггер               | Пользователь инициирует поиск                                                                                                                                                                                                                         |
| Постусловие           | Отображается список результатов поиска                                                                                                                                                                                                                |
| Основной поток        | 1. Пользователь инициирует поиск и вводит ключевые слова<br>2. Система проверяет запрос<br>3. Система отображает найденные изображения                                                                                                                |
| Альтернативные потоки | **Альтернатива 1: Некорректные данные**<br>2a. Если данные не соответствуют требованиям R-01, то система показывает сообщение об ошибке<br><br>**Альтернатива 2: Нет результатов**<br>3a. Если совпадений нет, система показывает «Ничего не найдено» |
| Исключения            | Ошибка при обращении к базе данных                                                                                                                                                                                                                    |

### Пользователь: Удалить изображение из альбома

| Название поля         | Содержание                                                                                                                                                                                                                                                                                                                                     |
| --------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Заголовок             | Пользователь: Удалить изображение из альбома                                                                                                                                                                                                                                                                                                   |
| Участники             | Пользователь                                                                                                                                                                                                                                                                                                                                   |
| Предусловие           | Пользователь авторизован, альбом открыт и изображение существует в альбоме                                                                                                                                                                                                                                                                     |
| Триггер               | Пользователь выбирает одно или несколько изображений                                                                                                                                                                                                                                                                                           |
| Постусловие           | Изображение удалено из альбома                                                                                                                                                                                                                                                                                                                 |
| Основной поток        | 1. Пользователь выбирает одно или несколько изображений<br>2. Пользователь инициирует удаление<br>3. Система отображает предупреждение: «Вы уверены, что хотите удалить выбранные изображения?»<br>4. Пользователь подтверждает удаление<br>5. Система удаляет выбранные изображения и обновляет отображение альбома без удалённых изображений |
| Альтернативные потоки | **Альтернатива 1: Отмена удаления**<br>4a.1. Пользователь нажимает «Отмена»<br>4a.2. Система не удаляет изображения и возвращает к просмотру альбома                                                                                                                                                                                           |
| Исключения            | Ошибка при обращении к базе данных                                                                                                                                                                                                                                                                                                             |

### Пользователь: Создать альбом

| Название поля         | Содержание                                                                                                                                                                                                                        |
| --------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Заголовок             | Пользователь: Создать альбом                                                                                                                                                                                                      |
| Участники             | Пользователь                                                                                                                                                                                                                      |
| Предусловие           | Пользователь авторизован                                                                                                                                                                                                          |
| Триггер               | Пользователь инициирует создание альбома                                                                                                                                                                                          |
| Постусловие           | В системе появляется новый альбом пользователя                                                                                                                                                                                    |
| Основной поток        | 1. Пользователь инициирует создание альбома<br>2. Система отображает форму<br>3. Пользователь вводит данные и подтверждает<br>4. Система проверяет корректность данных<br>5. Система сохраняет и отображает новый альбом в списке |
| Альтернативные потоки | **Альтернатива 1: Некорректные данные**<br>4a.1. Если данные не соответствуют требованиям R-01, R-02, R-03, то система показывает сообщение об ошибке                                                                             |
| Исключения            | Ошибка при обращении к базе данных                                                                                                                                                                                                |

### Пользователь: Оценить публикацию

| Название поля         | Содержание                                                                                                                                 |
| --------------------- | ------------------------------------------------------------------------------------------------------------------------------------------ |
| Заголовок             | Пользователь: Оценить публикацию                                                                                                           |
| Участники             | Пользователь                                                                                                                               |
| Предусловие           | Пользователь авторизован, публикация открыта                                                                                               |
| Триггер               | Пользователь инициирует оценку публикации                                                                                                  |
| Постусловие           | Публикация оценена, кол-во оценок публикации изменено                                                                                      |
| Основной поток        | 1. Пользователь инициирует оценку публикации<br>2. Система сохраняет оценку и изменяет кол-во оценок у публикации                          |
| Альтернативные потоки | **Альтернатива 1: Публикация уже оценена**<br>2a. Если пользователь уже оценил публикацию система убирает оценку и сохраняет кол-во оценок |
| Исключения            | Ошибка при обращении к базе данных                                                                                                         |

### Пользователь: Оценить изображение

| Название поля         | Содержание                                                                                                          |
| --------------------- | ------------------------------------------------------------------------------------------------------------------- |
| Заголовок             | Пользователь: Оценить изображение                                                                                   |
| Участники             | Пользователь                                                                                                        |
| Предусловие           | Пользователь авторизован, изображение открыто                                                                       |
| Триггер               | Пользователь инициирует оценку изображения                                                                          |
| Постусловие           | Изображение оценено, кол-во оценок изображения изменено                                                             |
| Основной поток        | 1. Пользователь инициирует оценку изображения<br>2. Система сохраняет оценку и изменяет кол-во оценок у изображения |
| Альтернативные потоки | -                                                                                                                   |
| Исключения            | Ошибка при обращении к базе данных                                                                                  |
