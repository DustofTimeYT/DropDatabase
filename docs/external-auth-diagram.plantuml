@startuml
actor Пользователь
participant "Система" as System
participant "Внешняя система авторизации" as Auth

Пользователь -> System: Открывает страницу входа
System -> Пользователь: Отображает варианты авторизации

Пользователь -> System: Выбирает вход через Google
System -> Auth: Перенаправляет пользователя на страницу авторизации

Auth -> Пользователь: Отображает форму входа и запрос разрешений
alt Пользователь подтверждает вход
    Пользователь -> Auth: Вводит учетные данные и подтверждает доступ
    Auth -> System: Возвращает токен доступа
    System -> System: Проверяет токен
    alt Токен действителен
        System -> Пользователь: Открывает личный кабинет
    else Токен недействителен или истек
        System -> Пользователь: Запрашивает повторную авторизацию
    end
else Пользователь отменяет авторизацию
    Пользователь -> Auth: Отменяет процесс входа
    Auth -> System: Сообщает об отмене авторизации
    System -> Пользователь: Возвращает на страницу входа
else Ошибка у внешнего провайдера
    Auth -> System: Сообщает об ошибке авторизации
    System -> Пользователь: Отображает сообщение об ошибке входа
end

@enduml

